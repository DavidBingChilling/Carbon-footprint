groupe_comparaison = {
    voiture_essence: ["Voiture essence", "km parcouru en voiture essence",  0.274],
    charbon: ["Charbon", "kg extrait", 2.17],
    television: ["Télévision", "heure d'utilisation", 0.06],
    avion: ["Avion", "km parcouru en avion (long/moyen courier)", 2.59],
    plastique: ["Plastique", "kg produit", 6.00],
    chauffage_gaz: ["Chauffage au gaz", "m2 a chauffer", 0.18],
    eau_chaude: ["Eau chaude", "litre consommé", 0.004],
    alimentation_viande: ["Alimentation - Viande", "kg de Viande", 27.0],
    alimentation_poisson: ["Alimentation - Poisson", "kg de Poisson", 5.0],
    alimentation_lait: ["Alimentation - Lait", "litre consommé", 1.2],
    velo: ["Vélo", "km parcouru", 0.005],
    cafe: ["Café", "tasse bue", 0.034],
    ordinateur: ["Ordinateur", "heure d'utilisation", 0.06],
    smartphone: ["Smartphone", "année d'utilisation", 22.0],
    refrigerateur: ["Réfrigérateur", "année d'utilisation", 95.0],
    ampoule_LED: ["Ampoule LED", "heure d'utilisation", 0.001],
    train: ["Train", "km parcouru en Train", 0.015],
    alimentation_pain: ["Alimentation - Pain", "kg de Pain", 0.8],
    alimentation_fruits: ["Alimentation - Fruits", "kg de Fruits", 0.5],
    alimentation_legumes: ["Alimentation - Légumes", "kg de Légumes", 0.3],
    eclairage_public: ["Éclairage public", "heure d'éclairage", 0.01],
    machine_a_laver: ["Machine à laver", "cycle de lavage", 0.6],
    sechage_linge: ["Séchage linge", "cycle de séchage", 1.8],
    climatisation: ["Climatisation", "heure de climatisation", 0.2],
    bouteille_verre: ["Bouteille en verre", "Bouteille en verre", 0.4],
    bouteille_plastique: ["Bouteille en plastique", "Bouteille en plastique", 0.1],
    sac_plastique: ["Sac plastique", "Sac plastique", 0.01],
    essence: ["Essence", "litre", 2.3],
    diesel: ["Diesel", "litre", 2.7],
    gaz_naturel: ["Gaz naturel", "m3", 1.9], 
    eolienne: ["Éolienne", "kWh produit", 0.01],
    solaire: ["Solaire", "kWh produit", 0.05],
    email: ["Email", "envoyé", 0.00001],
    cigarette: ["Cigarette", "Cigarette", 0.002],
    papier: ["Papier", "kg de Papier", 1.3],
    coton: ["Coton", "kg de Coton", 10.0],
    aspirateur: ["Aspirateur", "heure d'utilisation", 0.15],
    micro_onde: ["Micro-onde", "heure d'utilisation", 0.03],
    cafetiere_electrique: ["Cafetière électrique", "cycle", 0.025],
    four_electrique: ["Four électrique", "heure", 0.35],
    lave_vaisselle: ["Lave-vaisselle", "cycle de lavage", 0.8],
    grille_pain: ["Grille-pain", "heure d'utilisation", 0.1],
    bouteille_verre_vin: ["Bouteille de verre - Vin", "Bouteille de vin", 0.5],
    carton_emballage: ["Carton d'emballage", "kg de Carton d'emballage", 0.8],
    sachet_papier: ["Sachet papier", "Sachet papier", 0.01],
    boite_conserve: ["Boîte de conserve", "Boîte de conserve", 0.15],
    barquette_aluminium: ["Barquette aluminium", "Barquette aluminium", 0.03],
    bouteille_gaz: ["Bouteille de gaz", "kg de Bouteille de gaz", 3.0],
    chauffage_electrique: ["Chauffage électrique", "m2 a chauffer", 0.12],
    chauffage_fioul: ["Chauffage au fioul", "m2 a chauffer", 0.24],
    douche: ["Douche", "minute sous la douche", 0.01],
    bain: ["Bain", "Bains", 0.2],
    toilette_chasse_eau: ["Toilette - Chasse d'eau", "Chasse d'eau tirée", 0.01],
    usage_internet: ["Usage d'Internet", "heure d'utilisation", 0.015],
    eau_potable: ["Eau potable", "litre", 0.0003],
    produit_toilette: ["Produit de toilette", "Produits de toilette", 0.15],
    mouchoir_papier: ["Mouchoir en papier", "Mouchoirs en papier", 0.002],
    essuie_tout: ["Essuie-tout", "Essuie-tout", 0.02],
    coton_tige: ["Coton-tige", "Coton-tige", 0.0005],
    lingette_nettoyante: ["Lingette nettoyante", "Lingettes nettoyantes", 0.005],
    bouteille_biere: ["Bouteille de bière", "Bouteilles de bière", 0.15],
    canette_aluminium: ["Canette aluminium", "Canettes aluminium", 0.04],
    sac_papier: ["Sac en papier", "Sac en papier", 0.03],
    gant_jetables: ["Gants jetables", "Gants jetables", 0.004],
    masque_chirurgical: ["Masque chirurgical", "Masques chirurgicaux", 0.01],
    serviette_papier: ["Serviette en papier", "Serviettes en papier", 0.005],
    paille_plastique: ["Paille en plastique", "Pailles en plastique", 0.0015],
    climatiseur_mobile: ["Climatiseur mobile", "heure d'utilisation", 0.4],
    ordinateur_portable: ["Ordinateur portable", "année d'utilisation", 40.0],
    tablette: ["Tablette", "année d'utilisation", 30.0],
    imprimante: ["Imprimante", "année d'utilisation", 70.0],
    console_jeux: ["Console de jeux", "année d'utilisation", 60.0],
    eclairage_LED_exterieur: ["Éclairage LED extérieur", "heure d'utilisation", 0.005],
    eclairage_incandescent: ["Éclairage incandescent", "heure d'utilisation", 0.06],
    eclairage_halogene: ["Éclairage halogène", "heure d'utilisation", 0.045],
    eclairage_fluocompact: ["Éclairage fluocompact", "heure d'utilisation", 0.012],
    rasoir_electrique: ["Rasoir électrique", "année d'utilisation", 10.0],
    brosse_a_dents_electrique: ["Brosse à dents électrique", "année d'utilisation", 5.0],
    poussette: ["Poussette", "Poussettes", 40.0],
    trottinette_electrique: ["Trottinette électrique", "km parcouru", 0.035],
    scooter_essence: ["Scooter essence", "km parcouru", 0.08],
    moto_essence: ["Moto essence", "km parcouru", 0.12],
    voiture_electrique: ["Voiture électrique", "km parcouru", 0.04],
    voiture_hybride: ["Voiture hybride", "km parcouru", 0.06],
    taxi: ["Taxi", "km parcouru", 0.3],
    construction_maison: ["Construction maison", "m2 a construire", 100.0],
    renovation_maison: ["Rénovation maison", "m2 a rénover", 50.0],
    pesticide: ["Pesticide", "kg de Pesticide", 9.0],
    sac_plastique: ["Sac plastique", "Sacs plastiques", 0.01],
    sac_reutilisable: ["Sac réutilisable", "Sacs réutilisables", 0.5],
    papier_cadeau: ["Papier cadeau", "m2 de Papier cadeau", 0.03],
    ruban_adhesif: ["Ruban adhésif", "m de Ruban adhésif", 0.01],
    vetement_neuf: ["Vêtement neuf", "kg de Vetements neufs", 15.0],
    chaussure_neuve: ["Chaussure neuve", "paire de Chaussures neuves", 7.0],
    montre: ["Montre", "Montres", 30.0],
    bijou: ["Bijou", "kg de Bijou", 200.0],
    batterie_automobile: ["Batterie automobile", "Batteries automobiles", 30.0],
    telephone_portable: ["Téléphone portable", "Téléphones portables", 70.0],
    centrale_charbon: ["Centrale à charbon", "MWh produit", 900.0],
    centrale_gaz: ["Centrale à gaz", "MWh produit", 400.0],
    centrale_nucleaire: ["Centrale nucléaire", "MWh produit", 12.0],
    sac_ciment: ["Sac de ciment", "kg de Ciment", 0.9],
    goudron: ["Goudron", "kg de Goudron", 3.0],
    barre_chocolat: ["Barre de chocolat", "Barres de chocolat", 0.08],
    chewing_gum: ["Chewing-gum", "Chewing-gums", 0.001],
    paquet_cigarette: ["Paquet de cigarettes", "Paquets de cigarettes", 0.1],
    bougie_parfumee: ["Bougie parfumée", "Bougies parfumées", 0.3],
    deodorant_aerosol: ["Déodorant aérosol", "Déodorants aérosols", 0.5],
    rasoir_jetables: ["Rasoirs jetables", "Rasoirs jetables", 0.03],
    serviette_hygienique: ["Serviette hygiénique", "Serviettes hygiéniques", 0.03],
    tampon: ["Tampon", "Tampons", 0.02],
    preservatif: ["Préservatif", "Préservatifs", 0.005],
    emballage_plastique_film: ["Emballage plastique film", "kg d'Emballage plastique film", 1.5]
}

// Add event listener to the comparaison button
document.querySelector(".comparaison-button").addEventListener("click", addComparaison);

// Function to create category options for comparison
function createCategoryOptions() {
  const selectElement = document.getElementById('equivalence-category-select');

  // Iterate through the comparison group and create options for each category
  Object.entries(groupe_comparaison).forEach(([key, value]) => {
    const option = document.createElement('option');
    option.value = key; // Use the key as value
    option.textContent = value[0]; // Use the value of the key as text
    selectElement.appendChild(option);
  });
}

// Event listener when DOM content is loaded
document.addEventListener('DOMContentLoaded', () => {
  createCategoryOptions();
});

// Function to add a comparison card
function addComparaison() {
  const compareSelect = document.getElementById("equivalence-category-select");
  const compareValue = compareSelect.value;
  const compareContainer = document.getElementById("compare-container");
  const selectedCompare = compareSelect.querySelector(`option[value="${compareValue}"]`);

  // Check if the selected option is disabled (already added)
  if (selectedCompare.disabled) {
    // Do not add a card if the option is already disabled
    return;
  }

  // Generate comparison card HTML template
  let compareTemplate = `
    <div class="card compare-card" id="card-${compareValue}" style="width: 15.3rem;">
        <div class="card-body">
            <i class="fas fa-times close-icon" onclick="removeCompareCard('${compareValue}')"></i>
            <h5 class="card-title">${groupe_comparaison[compareValue][0]}</h5>
            <h6 class="card-subtitle mb-2 text-body-secondary"> <span id="co2-total-compare-${compareValue}" class="co2-value violet">0</span> kg de CO2 correspond a <span class="violet" id="co2-compare-${compareValue}">0</span> ${groupe_comparaison[compareValue][1]}</h6>
        </div>
    </div>
    `;

  // Insert the comparison card template into the comparison container
  compareContainer.insertAdjacentHTML("beforeend", compareTemplate);
  // Mark the selected option as selected and disabled
  selectedCompare.dataset.selected ="true";
  selectedCompare.disabled = true;
  // Calculate CO2 comparison
  calculCo2Compare(compareValue)
  // Update CO2 total
  updateCo2Total()
}

// Function to calculate CO2 comparison
function calculCo2Compare(compareValue) {
  // Get the total CO2 value
  let co2Total = document.getElementById("co2-total").textContent
  // Calculate the CO2 comparison value
  let co2Compare = co2Total / groupe_comparaison[compareValue][2] 
  // Update the CO2 comparison value in the UI
  document.getElementById(`co2-compare-${compareValue}`).textContent = co2Compare.toFixed(2);
}

// Function to update all comparisons
function updateAllComparisons() {
  const compareContainer = document.getElementById("compare-container");
  const compareCards = compareContainer.getElementsByClassName("compare-card");

  // Iterate through each comparison card and update the comparison value
  for (const card of compareCards) {
    const compareValue = card.id.replace("card-", "");
    calculCo2Compare(compareValue);
  }
}

// Function to remove a comparison card
function removeCompareCard(compareValue) {
  // Remove the comparison card element
  document.getElementById(`card-${compareValue}`).remove();
  // Enable the corresponding option in the comparison select
  const compareContainer = document.getElementById("equivalence-category-select");
  const selectedCompare = compareContainer.querySelector(`option[value="${compareValue}"]`);
  const categoryOption = selectedCompare;
  categoryOption.disabled = false;
  categoryOption.dataset.selected = "false";
}



  